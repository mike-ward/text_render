# Milestone v1.7: Stabilization

**Status:** SHIPPED 2026-02-05
**Phases:** 30-32
**Total Plans:** 4

## Overview

Fix v1.6 regressions (flickering, delays, blank regions in
stress_demo) without introducing new features. All three symptoms
traced to Phase 27 async double-buffer swap without accumulation.
Fixed via vmemcpy after swap.

## Phases

### Phase 30: Diagnosis

**Goal**: Root causes of all v1.6 regression symptoms are identified
and documented
**Depends on**: Nothing (first phase of v1.7)
**Requirements**: DIAG-01, DIAG-02, DIAG-03
**Plans**: 2 plans

Plans:

- [x] 30-01: Instrument async path, automated scroll, kill switch test
- [x] 30-02: Analyze results, document root causes

**Details:**

Success Criteria:
1. Scroll flickering in stress_demo can be reproduced on demand and
   trigger mechanism documented
2. Rendering delay root cause traced to specific v1.6 code path
3. Blank scroll region cause identified with evidence
4. Each symptom mapped to specific v1.6 change that introduced it

Result: All 3 symptoms attributed to Phase 27 double-buffer swap
without accumulation. Phases 26 and 28 ruled out. User empirically
validated: async=missing characters, sync=renders correctly.

### Phase 31: Fix

**Goal**: All regression symptoms are resolved in stress_demo
**Depends on**: Phase 30
**Requirements**: FIX-01, FIX-02, FIX-03, FIX-04
**Plans**: 1 plan

Plans:

- [x] 31-01: Apply vmemcpy fix to swap_staging_buffers, validate with
  tests + user visual check

**Details:**

Success Criteria:
1. stress_demo scrolls smoothly without visible flickering
2. stress_demo renders text without perceptible delays during scroll
   and resize
3. stress_demo shows no blank regions during or after scrolling
4. No new regressions introduced (existing tests pass)

Result: vmemcpy staging_front to staging_back after pointer swap in
swap_staging_buffers(). All 6 test files pass. User visually
confirmed: no flickering, no blank regions, no delays.

### Phase 32: Verification

**Goal**: All demos and tests confirmed regression-free
**Depends on**: Phase 31
**Requirements**: VRFY-01, VRFY-02, VRFY-03, VRFY-04
**Plans**: 1 plan

Plans:

- [x] 32-01: Run tests, compile demos, visual verification

**Details:**

Success Criteria:
1. stress_demo scrolls continuously for 30+ seconds without
   flickering, blanks, or delays
2. editor_demo text entry, selection, and scrolling work without
   visual artifacts
3. atlas_debug renders glyph atlas correctly without corruption
4. `v test` passes with zero failures

Result: All criteria met. 6/6 tests pass, all 3 demos compile
cleanly, user visually confirmed all regression-free.

---

## Milestone Summary

**Key Decisions:**

- All diagnostic code behind `$if diag ?` for zero overhead
- All three symptoms attributed to Phase 27 double-buffer swap
- Fix direction: memcpy staging_front to staging_back after swap
- Copy all pages after swap (not dirty-only) for correctness
- No code changes needed in Phase 32 (fix sufficient)

**Issues Resolved:**

- v1.6 scroll flickering in stress_demo
- v1.6 rendering delays in stress_demo
- v1.6 blank scroll regions in stress_demo

**Issues Deferred:**

- None

**Technical Debt Incurred:**

- Diagnostic instrumentation ($if diag blocks) remains in codebase
  (zero overhead in release)

---

_For current project status, see .planning/ROADMAP.md_
